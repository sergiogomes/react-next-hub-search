{"ast":null,"code":"var _jsxFileName = \"/Users/sergiogomes/Documents/Workfolder/react-next-hub-search/src/pages/search.js\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from \"react\";\nimport Router from \"next/router\";\nimport SideSearch from \"../components/sideSearch/sideSearch\";\nimport ResultSearch from \"../components/resultSearch/resultSearch\";\nimport Pagination from \"../components/pagination/pagination\";\nimport { getSearchUsers, getSearchCodes, getSearchCommits, getSearchIssues, getSearchTopics, getSearchRepositories } from \"../../actions\";\nconst ph_obj = {\n  id: 0,\n  results: 0,\n  items: [],\n  title: \"\",\n  single: \"\"\n};\n\nclass Search extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"handleSideSearchOption\", (option, text) => {\n      this.setState({\n        filter: [option.title]\n      });\n      Router.push(`/search?q=${text}&page=${1}&type=${option.title}`);\n    });\n\n    _defineProperty(this, \"filterResults\", options => {\n      return options.filter(option => {\n        return option.title && option.title === this.state.filter[0];\n      });\n    });\n\n    _defineProperty(this, \"handleChangePage\", (text, page, type) => {\n      Router.push(`/search?q=${text}&page=${page}&type=${type}`);\n    });\n\n    this.state = {\n      filter: [\"Repositories\"]\n    };\n  }\n\n  static async getInitialProps({\n    query\n  }) {\n    const optionsArray = [];\n    const text = query.q;\n    const page = query.page;\n    const repositoriesData = await getSearchRepositories(text, page);\n    const codesData = await getSearchCodes(text, page);\n    const commitsData = await getSearchCommits(text, page);\n    const issuesData = await getSearchIssues(text, page);\n    const topicsData = await getSearchTopics(text, page);\n    const usersData = await getSearchUsers(text, page);\n    optionsArray.push({\n      id: 1,\n      results: repositoriesData.total_count,\n      items: repositoriesData.items,\n      title: \"Repositories\",\n      single: \"repository\"\n    });\n    optionsArray.push({\n      id: 2,\n      results: codesData.total_count,\n      items: codesData.items,\n      title: \"Code\",\n      single: \"code\"\n    });\n    optionsArray.push({\n      id: 3,\n      results: commitsData.total_count,\n      items: commitsData.items,\n      title: \"Commits\",\n      single: \"commit\"\n    });\n    optionsArray.push({\n      id: 4,\n      results: issuesData.total_count,\n      items: issuesData.items,\n      title: \"Issues\",\n      single: \"issue\"\n    });\n    optionsArray.push({\n      id: 5,\n      results: 0,\n      items: [],\n      title: \"Discussions\",\n      single: \"discussion\"\n    });\n    optionsArray.push({\n      id: 6,\n      results: 0,\n      items: [],\n      title: \"Packages\",\n      single: \"package\"\n    });\n    optionsArray.push({\n      id: 7,\n      results: 0,\n      items: [],\n      title: \"Marketplace\",\n      single: \"marketplace\"\n    });\n    optionsArray.push({\n      id: 8,\n      results: topicsData.total_count,\n      items: topicsData.items,\n      title: \"Topics\",\n      single: \"topic\"\n    });\n    optionsArray.push({\n      id: 9,\n      results: 0,\n      items: [],\n      title: \"Wikis\",\n      single: \"Wiki\"\n    });\n    optionsArray.push({\n      id: 10,\n      results: usersData.total_count,\n      items: usersData.items,\n      title: \"Users\",\n      single: \"user\"\n    });\n    return {\n      optionsArray,\n      text,\n      page\n    };\n  }\n\n  render() {\n    const {\n      optionsArray,\n      text,\n      page\n    } = this.props;\n    return __jsx(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      className: \"col-12 col-sm-12 col-md-3 col-lg-3 col-xl-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }\n    }, __jsx(SideSearch, {\n      changeSideSearchOption: this.handleSideSearchOption,\n      activeOption: this.state.filter[0],\n      options: optionsArray || [],\n      text: text,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }\n    })), __jsx(\"div\", {\n      className: \"col-12 col-sm-12 col-md-9 col-lg-9 col-xl-9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }\n    }, __jsx(ResultSearch, {\n      text: text,\n      page: page,\n      options: this.filterResults(optionsArray) || ph_obj,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }\n    }), this.filterResults(optionsArray)[0].results > 30 && __jsx(Pagination, {\n      text: text,\n      page: page,\n      options: this.filterResults(optionsArray)[0] || ph_obj,\n      changePage: this.handleChangePage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 13\n      }\n    })));\n  }\n\n}\n\nexport default Search;","map":{"version":3,"sources":["/Users/sergiogomes/Documents/Workfolder/react-next-hub-search/src/pages/search.js"],"names":["React","Router","SideSearch","ResultSearch","Pagination","getSearchUsers","getSearchCodes","getSearchCommits","getSearchIssues","getSearchTopics","getSearchRepositories","ph_obj","id","results","items","title","single","Search","Component","constructor","props","option","text","setState","filter","push","options","state","page","type","getInitialProps","query","optionsArray","q","repositoriesData","codesData","commitsData","issuesData","topicsData","usersData","total_count","render","handleSideSearchOption","filterResults","handleChangePage"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Router from \"next/router\";\n\nimport SideSearch from \"../components/sideSearch/sideSearch\";\nimport ResultSearch from \"../components/resultSearch/resultSearch\";\nimport Pagination from \"../components/pagination/pagination\";\n\nimport {\n  getSearchUsers,\n  getSearchCodes,\n  getSearchCommits,\n  getSearchIssues,\n  getSearchTopics,\n  getSearchRepositories,\n} from \"../../actions\";\n\nconst ph_obj = {\n  id: 0,\n  results: 0,\n  items: [],\n  title: \"\",\n  single: \"\",\n};\n\nclass Search extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      filter: [\"Repositories\"],\n    };\n  }\n\n  static async getInitialProps({ query }) {\n    const optionsArray = [];\n    const text = query.q;\n    const page = query.page;\n\n    const repositoriesData = await getSearchRepositories(text, page);\n    const codesData = await getSearchCodes(text, page);\n    const commitsData = await getSearchCommits(text, page);\n    const issuesData = await getSearchIssues(text, page);\n    const topicsData = await getSearchTopics(text, page);\n    const usersData = await getSearchUsers(text, page);\n\n    optionsArray.push({\n      id: 1,\n      results: repositoriesData.total_count,\n      items: repositoriesData.items,\n      title: \"Repositories\",\n      single: \"repository\",\n    });\n    optionsArray.push({\n      id: 2,\n      results: codesData.total_count,\n      items: codesData.items,\n      title: \"Code\",\n      single: \"code\",\n    });\n    optionsArray.push({\n      id: 3,\n      results: commitsData.total_count,\n      items: commitsData.items,\n      title: \"Commits\",\n      single: \"commit\",\n    });\n    optionsArray.push({\n      id: 4,\n      results: issuesData.total_count,\n      items: issuesData.items,\n      title: \"Issues\",\n      single: \"issue\",\n    });\n    optionsArray.push({\n      id: 5,\n      results: 0,\n      items: [],\n      title: \"Discussions\",\n      single: \"discussion\",\n    });\n    optionsArray.push({\n      id: 6,\n      results: 0,\n      items: [],\n      title: \"Packages\",\n      single: \"package\",\n    });\n    optionsArray.push({\n      id: 7,\n      results: 0,\n      items: [],\n      title: \"Marketplace\",\n      single: \"marketplace\",\n    });\n    optionsArray.push({\n      id: 8,\n      results: topicsData.total_count,\n      items: topicsData.items,\n      title: \"Topics\",\n      single: \"topic\",\n    });\n    optionsArray.push({\n      id: 9,\n      results: 0,\n      items: [],\n      title: \"Wikis\",\n      single: \"Wiki\",\n    });\n    optionsArray.push({\n      id: 10,\n      results: usersData.total_count,\n      items: usersData.items,\n      title: \"Users\",\n      single: \"user\",\n    });\n\n    return {\n      optionsArray,\n      text,\n      page,\n    };\n  }\n\n  handleSideSearchOption = (option, text) => {\n    this.setState({ filter: [option.title] });\n    Router.push(`/search?q=${text}&page=${1}&type=${option.title}`);\n  };\n\n  filterResults = (options) => {\n    return options.filter((option) => {\n      return option.title && option.title === this.state.filter[0];\n    });\n  };\n\n  handleChangePage = (text, page, type) => {\n    Router.push(`/search?q=${text}&page=${page}&type=${type}`);\n  };\n\n  render() {\n    const { optionsArray, text, page } = this.props;\n\n    return (\n      <div className=\"row\">\n        {/* Bootstrap grid system */}\n        <div className=\"col-12 col-sm-12 col-md-3 col-lg-3 col-xl-3\">\n          <SideSearch\n            changeSideSearchOption={this.handleSideSearchOption}\n            activeOption={this.state.filter[0]}\n            options={optionsArray || []}\n            text={text}\n          />\n        </div>\n        <div className=\"col-12 col-sm-12 col-md-9 col-lg-9 col-xl-9\">\n          <ResultSearch\n            text={text}\n            page={page}\n            options={this.filterResults(optionsArray) || ph_obj}\n          />\n          {this.filterResults(optionsArray)[0].results > 30 && (\n            <Pagination\n              text={text}\n              page={page}\n              options={this.filterResults(optionsArray)[0] || ph_obj}\n              changePage={this.handleChangePage}\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}